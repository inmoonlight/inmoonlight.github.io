<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Social Bias in NLP Models - Space Moon</title><meta description="한 스타트업에서 개발한 인공지능 채용솔루션(a.k.a. AI 면접관)을 벌써 여러 기업에서 사용하고 있다는 뉴스기사를 접하게 되었다. 해당 기업은 &amp;quot;성별이나 학력 등에 따른 차별 방지와 정확한 역량 추정&amp;quot;을 위해 5만 2천여명의 데이터를 확보하여 학습했다고 말한다. 5만 2천여명의 데이터와 차별 방지가 어떤 관련이 있는지는 모르겠지만, 많은 양의 데이터를"><meta property="og:type" content="blog"><meta property="og:title" content="Social Bias in NLP Models"><meta property="og:url" content="https://inmoonlight.github.io/2020/11/14/Social-bias-in-NLP-models/"><meta property="og:site_name" content="Space Moon"><meta property="og:description" content="한 스타트업에서 개발한 인공지능 채용솔루션(a.k.a. AI 면접관)을 벌써 여러 기업에서 사용하고 있다는 뉴스기사를 접하게 되었다. 해당 기업은 &amp;quot;성별이나 학력 등에 따른 차별 방지와 정확한 역량 추정&amp;quot;을 위해 5만 2천여명의 데이터를 확보하여 학습했다고 말한다. 5만 2천여명의 데이터와 차별 방지가 어떤 관련이 있는지는 모르겠지만, 많은 양의 데이터를"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/twitter_obama.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/twitter_yann.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/yann_cho.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/cho_ethics_solution_space.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/cho_ethics_seed_solution_space.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/casuality_graph.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/bias_word2vec_figure.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/pmi_equation.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/likelihood_confidence_equation.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/snli_bias_table.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/snli_bias_table_2.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/bias_coref_type1.png?style=left"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/bias_coref_type2.png?style=right"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/winobias_figure.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/stereoset_example.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/crowspair_table.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/crowspair_figure.png?style=centerme"><meta property="og:image" content="https://inmoonlight.github.io/assets/images/crowspair_score.png?style=centerme"><meta property="article:published_time" content="2020-11-14T02:00:00.000Z"><meta property="article:modified_time" content="2023-11-02T02:50:49.148Z"><meta property="article:author" content="Jihyung Moon"><meta property="article:tag" content="NLP"><meta property="article:tag" content="social good"><meta property="article:tag" content="bias"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/assets/images/twitter_obama.png?style=centerme"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://inmoonlight.github.io/2020/11/14/Social-bias-in-NLP-models/"},"headline":"Space Moon","image":[],"datePublished":"2020-11-14T02:00:00.000Z","dateModified":"2023-11-02T02:50:49.148Z","author":{"@type":"Person","name":"Jihyung Moon"},"description":"한 스타트업에서 개발한 인공지능 채용솔루션(a.k.a. AI 면접관)을 벌써 여러 기업에서 사용하고 있다는 뉴스기사를 접하게 되었다. 해당 기업은 &quot;성별이나 학력 등에 따른 차별 방지와 정확한 역량 추정&quot;을 위해 5만 2천여명의 데이터를 확보하여 학습했다고 말한다. 5만 2천여명의 데이터와 차별 방지가 어떤 관련이 있는지는 모르겠지만, 많은 양의 데이터를"}</script><link rel="canonical" href="https://inmoonlight.github.io/2020/11/14/Social-bias-in-NLP-models/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-131297969-1" async></script><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-131297969-1');</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="alternate" href="/feed.xml" title="Space Moon" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/space_moon.png" alt="Space Moon" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/inmoonlight"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" datetime="2020-11-14T02:00:00.000Z" title="2020-11-14T02:00:00.000Z">2020-11-14</time><span class="level-item"><a class="link-muted" href="/categories/ML/">ML</a><span> / </span><a class="link-muted" href="/categories/ML/NLP/">NLP</a></span><span class="level-item">28 minutes read (About 4200 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Social Bias in NLP Models</h1><div class="content"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>한 스타트업에서 개발한 인공지능 채용솔루션(a.k.a. AI 면접관)을 벌써 여러 기업에서 사용하고 있다는 뉴스기사를 접하게 되었다. 해당 기업은 "성별이나 학력 등에 따른 차별 방지와 정확한 역량 추정"을 위해 5만 2천여명의 데이터를 확보하여 학습했다고 말한다. 5만 2천여명의 데이터와 차별 방지가 어떤 관련이 있는지는 모르겠지만, <em>많은</em> 양의 데이터를 사용한다는 걸 내세우고 싶었다면 대량의 데이터가 편향성을 줄이는 것과는 무관하다고 말하고 싶다. 5만 2천개보다 더 많은 데이터로 학습한 Language Model 도 편향성 문제가 있으며 이 이슈는 아직도 연구자들에 의해 활발히 연구되고 있다. <a id="more"></a></p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><h2 id="introduction">Introduction</h2>
<p>2020년 6월 말에 다음과 같은 트윗이 올라왔다. 오바마를 모자이크한 이미지를 넣었는데 백인의 특징을 가진 이미지가 생성이 되었다는 것이다.</p>
<p><img src="/assets/images/twitter_obama.png?style=centerme" width="45%"> <br> 이 트윗은 흘러흘러 Yann LeCun의 귀에 들어간다.</p>
<p><img src="/assets/images/twitter_yann.png?style=centerme" width="65%" alt="그건 모델의 문제가 아니야! 데이터의 문제라구!"> <br></p>
<p>그리고 이는 다시 조경현 교수님을 통해 Alice Oh 교수님의 AI &amp; Ethics 특강 발표자료<sup id="fnref:9"><a href="#fn:9" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://kyunghyuncho.me/social-impacts-bias-of-ai/
">[9]</span></a></sup>에서 아래의 문구와 함께 다시 한번 인용된다.</p>
<blockquote>
<p>Too much blame on data curation, too little blame on algorithms</p>
</blockquote>
<p><img src="/assets/images/yann_cho.png?style=centerme" width="65%"></p>
<p>조경현 교수님의 이야기를 좀 더 들어보자. "물론 데이터도 문제가 있지만 알고리즘의 잘못이 전혀 없는 것은 아니다" 라고 주장한다.</p>
<p>아래의 장표에서는 ML 알고리즘의 solution space를 구획별로 나누어서 총 4가지로 구분하고 있다.</p>
<ul>
<li>Training solutions: 학습 데이터셋에서 좋은 성능을 보이는 solution space</li>
<li>Shortcut solutions: 학습 및 주어진 테스트셋에서 좋은 성능을 보이는 solution space</li>
<li>Intended solutions: 학습 및 주어진 테스트셋과 o.o.d 테스트셋 모두에서 좋은 성능을 보이는 solution space. 여기야말로 우리가 원하는 진짜 general knowledge가 있는 space</li>
<li>Learnable solutions: 알고리즘이 학습을 통해 도달할 수 있는 solution space</li>
</ul>
<p><img src="/assets/images/cho_ethics_solution_space.png?style=centerme" width="75%"></p>
<p>우리가 원하는 것은 intended solution space와 learnable space가 만나는 점에 학습 모델이 수렴하게 만드는 것이다. 하지만 이는 쉽지 않다. data bias 가 있기 때문에 model 이 학습과정에서 data 내에 존재하는 bias 를 함유할 수 밖에 없는 것은 맞지만, 그럼에도 불구하고 이 모든 것이 data bias 의 잘못때문만은 아니라는 것이 조경현 교수님이 이야기하고 싶었던 내용이다.</p>
<p>아래의 장표는 random seed 를 바꿈에 따라 learnable 모델의 학습 결과가 위치하는 solution space를 보여준다. seed 만 바꾸어도 solution space가 달라지는 것으로 미루어보아, 충분히 모델의 학습 과정을 잘 tuning 하면 원하는 solution space 쪽으로 학습할 여지가 있다고 보여진다.</p>
<p><img src="/assets/images/cho_ethics_seed_solution_space.png?style=centerme" width="75%"> <br></p>
<h2 id="undesirable-solution-의-이유는-무엇일까">Undesirable solution 의 이유는 무엇일까?</h2>
<p>여러 이유 중 하나로, shortcut solution 중 일부는 잘못된 correlation 을 학습하기 때문이라는 점이 있다.</p>
<p>"Correlation does not imply Causality" 라는 유명한 명제가 있다. 눈에 드러나는 X와 Y variable 의 관계에 모두 영향을 미치는 confounding factor Z 가 있고 hidden varirable 인 경우 우리는 실제 인과관계를 놓치고 상관관계를 인과관계처럼 학습할 위험이 있다.</p>
<p><img src="/assets/images/casuality_graph.png?style=centerme" width="25%"></p>
<p>가장 유명한 예로, "초콜렛의 소비(X)가 많은 나라에서 노벨상(Y)을 많이 받는다." 가 있다. 실제로는 "고등교육에 투자하는 물질적, 시간적 여유가 많을수록(Z) 초콜렛 소비(X)가 많다." 와 "고등교육에 투자하는 물질적, 시간적 여유가 많을수록(Z) 노벨상(Y)을 많이 받는다."의 인과관계에서 Z variable 을 무시한채 해석하면 잘못된 정보를 학습할 수 있다는 것을 보여준다.</p>
<p>모델도 마찬가지다. 학습에 노출되는 데이터 분포에서는 Z가 명시적으로 보이지 않을 수 있다. 백인 남성이 상대적으로 경제적인 여유가 더 있어서 인터넷에 사진을 업로드하는 경우가 많았고, 이 때문에 웹에서 수집한 데이터 중의 대다수가 백인 남성일 수 밖에 없다고 했을 때, 이 사실은 데이터의 분포만 파악하는 모델의 입장에서는 학습하기 어려운 정보일 수 있다.</p>
<h2 id="모든-bias-가-나쁠까">모든 bias 가 나쁠까?</h2>
<p>꼭 그렇지는 않다. 때론 우리는 모델이 inductive bias 를 학습하길 바란다. 예를 들어, "나비가 코끼리를 포식하지 않는다" 는 정보는 모델 입장에서는 필요한 bias 이다. 그러나 social bias 와 같은 종류의 정보는 학습하지 않기를 기대한다.</p>
<h2 id="nlp에서는">NLP에서는?</h2>
<p>앞에서는 이미지를 예로 들었지만, 여러 논문에서도 NLP 모델이 social bias 를 학습하고 있다는 사실을 직/간접적적으로 보여주고 있다.</p>
<p>모델이 학습한 word embedding 을 분석해서 bias를 학습했음을 통해 보이거나<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Man is to computer programmer as woman is to homemaker? debiasing word embeddings](https://proceedings.neurips.cc/paper/2016/file/a486cd07e4ac3d270571622f4f316ec5-Paper.pdf) 
">[1]</span></a></sup><sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Semantics derived automatically from language corpora contain human-like biases](https://arxiv.org/abs/1608.07187) 
">[2]</span></a></sup>, 학습 dataset 자체에 social bias 가 있음을 보이거나<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Social Bias in Elicited Natural Language Inferences](https://www.aclweb.org/anthology/W17-1609/) 
">[3]</span></a></sup>, bias 를 측정하는 task와 metric을 제안하여 얼만큼 bias를 학습했는지 를 수치적으로 평가<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Semantics derived automatically from language corpora contain human-like biases](https://arxiv.org/abs/1608.07187) 
">[2]</span></a></sup><sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Gender Bias in Coreference Resolution: Evaluation and Debiasing Methods](https://www.aclweb.org/anthology/N18-2003/) 
">[4]</span></a></sup><sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[StereoSet: Measuring stereotypical bias in pretrained language models](https://arxiv.org/abs/2004.09456)
">[5]</span></a></sup><sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[CrowS-Pairs: A Challenge Dataset for Measuring Social Biases in Masked Language Models](https://arxiv.org/abs/2010.00133) 
">[6]</span></a></sup>한다. 새로운 bias 측정 task를 제안할 때 수반되는 dataset이 있는데, 여기에도 구축 방식에 따라 두가지 종류로 나눌 수 있다. 하나는 templated-based dataset<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Gender Bias in Coreference Resolution: Evaluation and Debiasing Methods](https://www.aclweb.org/anthology/N18-2003/) 
">[4]</span></a></sup>, 다른 하나는 crowdsourced dataset<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[StereoSet: Measuring stereotypical bias in pretrained language models](https://arxiv.org/abs/2004.09456)
">[5]</span></a></sup><sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[CrowS-Pairs: A Challenge Dataset for Measuring Social Biases in Masked Language Models](https://arxiv.org/abs/2010.00133) 
">[6]</span></a></sup> 이다.</p>
<h3 id="모델의-embedding-space-분석">모델의 embedding space 분석</h3>
<p>이 방법론은 PLM 이전, word2vec 이 많이 사용되었던 시기에 등장했다. word2vec을 통해 학습된 단어의 관계를 분석했을 때 social bias 가 얼마나 반영되었는지를 판단한다. 예를 들어, <code>man - woman ~= computer programmer - homemaker</code> 의 관계가 성립한다면 이 모델은 social bias 를 함유하고 있다고 볼 수 있다.</p>
<p><strong>Man is to computer programmer as woman is to homemaker? debiasing word embeddings</strong><sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Man is to computer programmer as woman is to homemaker? debiasing word embeddings](https://proceedings.neurips.cc/paper/2016/file/a486cd07e4ac3d270571622f4f316ec5-Paper.pdf) 
">[1]</span></a></sup>에서는 word2vec의 geometric bias에 대해 분석하였다.</p>
<p><img src="/assets/images/bias_word2vec_figure.png?style=centerme" width="75%"></p>
<p>Figure 1의 왼쪽에는 she / he 와 가까이에 있는 직업 단어 목록이 있다. 그리고 각 직업 단어들을 crowd worker 에게 female-stereotypic, male-steretotypic, neutral 한지를 물었을 때의 결과와 corrleation을 구했고, 그 결과 0.51 정도의 moderate 한 결과가 나왔다.</p>
<p>Figure 1의 오른쪽에는 she-he 의 관계와 유사한 단어들의 관계 목록을 보여주고 있다. 이 중에서 Gender stereotypical 한 analogy와 gender appropriate한 analogy의 수량을 비교하였고, 150 개의 관계 중 29개가 gender stereotypical 하다고 판단되었다.</p>
<h3 id="데이터셋-자체에-함유된-bias">데이터셋 자체에 함유된 Bias</h3>
<p>학습한 모델을 분석하는 방법이 아닌, 학습하는 대상이 되는 데이터셋 자체를 model-agnostic 하게 분석하는 방법도 제안되었다.</p>
<p><strong>Social Bias in Elicited Natural Language Inferences</strong><sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Social Bias in Elicited Natural Language Inferences](https://www.aclweb.org/anthology/W17-1609/) 
">[3]</span></a></sup>에서는 SNLI 데이터셋에 존재하는 bias 를 PMI 와 Likelihood ratio test of independence를 통해 통계적으로 분석하였다.</p>
<p><img src="/assets/images/pmi_equation.png?style=centerme" width="50%" alt="w1과 w2의 PMI. 값이 높을수록 함께 등장하는 확률이 높다고 볼 수 있음"> <br> <img src="/assets/images/likelihood_confidence_equation.png?style=centerme" width="50%" alt="X와 Y의 independence에 대한 기각 test로, 값이 낮을수록 dependency가 있는 것으로 해석할 수 있음. 자세한 수식은 논문 참고"></p>
<p>아래의 Table 1은 SNLI 데이터에서 gender, age, race/ethnicity/nationality 에 해당하는 단어들 각각에 대해 PMI가 높은 단어들을 나열해 놓은 것이다. woman &amp; man, girls &amp; boys, white man &amp; african american 등 차이가 없어야할 개념들에 대해 PMI 상 가까운 단어들을 비교해보면 차이가 있다.</p>
<p><img src="/assets/images/snli_bias_table.png?style=centerme" width="75%"></p>
<p>Table 2는 inference type 별로 gender words 들에 대해 PMI가 높은 순서대로 정렬한 결과다. 당연히 비슷할 수 밖에 없는 결과 - women &amp; woman, females - 를 제외하고 gender stereotypical 한 단어들을 살펴보면 gender bias가 사뭇 드러난다. women - chat, smile 은 entailed 관계인 반면, women - dicussing, politics 는 contradiction 관계에서 자주 등장한다.</p>
<p><img src="/assets/images/snli_bias_table_2.png?style=centerme" width="80%"></p>
<h3 id="bias-evaluation-task">Bias evaluation task</h3>
<p>앞서 소개한 두 방법은 모델 학습결과의 embedding space에서의 단어 분포와 데이터 자체의 특성을 이용한 통계학적 관점을 활용하였다.</p>
<p>이와 다르게 모델의 bias를 확인할 수 있는 방법으로 task based evaluation 이 있다. bias 를 판단할 수 있는 task 즉, dataset과 metric 을 설계해서 점수를 내고 비교하는 방식이다. 이는 다시, template based dataset 과 crowdsource-based dataset을 활용한 task로 나눠볼 수 있다.</p>
<p><strong>Gender Bias in Coreference Resolution: Evaluation and Debiasing Methods</strong><sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Gender Bias in Coreference Resolution: Evaluation and Debiasing Methods](https://www.aclweb.org/anthology/N18-2003/) 
">[4]</span></a></sup>에서는 winograd schema 를 바탕으로 bias를 측정할 수 있는 task를 제안하였다. Winograd Schema<sup id="fnref:8"><a href="#fn:8" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://en.wikipedia.org/wiki/Winograd_Schema_Challenge
">[8]</span></a></sup>란, Terry Winograd 의 이름을 딴 schema 로, 아래의 예시와 같은 문장 형식을 일컫는다.</p>
<blockquote>
<p>The city councilmen refused the demonstrators a permit because they [feared/advocated] violence.</p>
</blockquote>
<p>이 task의 정답을 맞추기 위해선, 대명사가 무엇을 가리키는지에 대한 이해가 필요하고, 이 이해는 councilment과 demonstrator의 관계에 대한 지식을 바탕으로 한다.</p>
<p>아래의 두가지 타입을 따르는 문장들이 bias를 테스트하기 위한 dataset으로 제안된다. <code>[entity1]</code>, <code>[entity2]</code>는 Male 혹은 Female entity 들이고, <code>[pronoun]</code>은 he/she 의 대명사이다. 문장 내에서 <code>[pronoun]</code>과 <code>[entity]</code>의 관계를 보고, pro-stereotypical 한 관계를 anti-stereotypical 한 관계보다 선호한다면 bias가 있는 모델로 판단한다.</p>
<p><img src="/assets/images/bias_coref_type1.png?style=left" width="45%"> <img src="/assets/images/bias_coref_type2.png?style=right" width="45%"> <img src="/assets/images/winobias_figure.png?style=centerme" width="55%"></p>
<p><strong>StereoSet: Measuring stereotypical bias in pretrained language models</strong><sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[StereoSet: Measuring stereotypical bias in pretrained language models](https://arxiv.org/abs/2004.09456)
">[5]</span></a></sup> 은 4개의 bias domain - gender, profession, race, religion - 에 대해서 crowdsource 방식으로 수집된 데이터와 bias 측정 metric 을 제안하고 있다. crowdsource 방식은 template 기반 방식 대비 real-world 에 더 가깝게 데이터셋을 수집할 수 있다는 장점이 있다.</p>
<p>StereoSet에서는 LM이 배워야 할 지식과 배우지 않길 기대하는 지식 (social bias) 을 구분해서 학습했는지 여부를 테스트한다. Context Association Test (CAT) 라고 명칭한 Test는 Intrasentence와 Intersentence 두 종류의 테스트로 구성되어 있다.</p>
<p><img src="/assets/images/stereoset_example.png?style=centerme" width="45%"></p>
<p>그리고 모델이 각 test에 대해 답변한 결과를 ranking problem (option 1을 선택한 비율이 option 2를 선택한 비율보다 많았는가, 적었는가) 으로 pose 시켜서 최종 bias score를 낸다.</p>
<p>앞서 언급했듯이, LM이 배워야 할 지식과 배우지 않길 기대하는 지식 (social bias) 을 구분해서 학습했는지 여부를 테스트하기 때문에 lms 와 ss 를 구분하였고, 이 두 점수를 종합해서 최종 CAT score 를 도출한다.</p>
<ul>
<li><strong>Language Modeling Score (lms)</strong>
<ul>
<li>model has to rank the meaningful association higher than meaningless associaton</li>
<li>score: percentage of instances in which a language model prefers</li>
<li>ideal: 100</li>
</ul></li>
<li><strong>Stereotype Score (ss)</strong>
<ul>
<li>score: percentage examples in which a model prefers a stereotypical association over an anti-stereotypical association</li>
<li>ideal: 50</li>
</ul></li>
<li><strong>Idealized CAT Score (icat)</strong>
<ul>
<li><p>combine both lms and ss</p>
<p>\[icat = lms *\frac{min(ss, 100-ss)}{50}\]</p></li>
<li><p>ideal: 100 (when lms: 100 and ss: 50)</p></li>
<li><p>fully biased: 0 (when lms: 0, ss: 100 or 0)</p></li>
<li><p>random model: 50 (when lms: 50, ss: 50)</p></li>
</ul></li>
</ul>
<p><strong>CrowS-Pairs: A Challenge Dataset for Measuring Social Biases in Masked Language Models</strong><sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[CrowS-Pairs: A Challenge Dataset for Measuring Social Biases in Masked Language Models](https://arxiv.org/abs/2010.00133) 
">[6]</span></a></sup>은 EMNLP 2020에 억셉된 논문으로, stereoset과 마찬가지로 template 기반이 아닌 crowndsourced 데이터셋으로 구성되어 있다. 크게 9가지의 bias에 대해 문장 하나는 stereotyping한 것, 다른 하나는 덜 stereotyping 한 것으로 구성한다. 두 문장의 거리는 매우 가까워야 한다.</p>
<p><img src="/assets/images/crowspair_table.png?style=centerme" width="80%"></p>
<p>평가의 경우, 차이가 있는 token을 제외한 나머지 token (=unmodified token)을 순차적으로 masking 해서 각각의 log-likelihood를 구한 뒤 그 합을 최종 점수로 가진다.</p>
<p><img src="/assets/images/crowspair_figure.png?style=centerme" width="85%"></p>
<p><img src="/assets/images/crowspair_score.png?style=centerme" width="35%"></p>
<h3 id="limitations-on-bias-in-nlp-researches">Limitations on "Bias in NLP" researches</h3>
<p><strong>Language (Technology) is Power: A Critical Survey of “Bias” in NLP</strong><sup id="fnref:7"><a href="#fn:7" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Language (Technology) is Power: A Critical Survey of “Bias” in NLP](https://arxiv.org/abs/2005.14050)
">[7]</span></a></sup>에서는 기존의 146개 "bias in NLP" paper에 대한 survey를 진행하면서 이전 연구들에 대한 비판과 이를 극복할 수 있는 방향으로의 연구를 제안하였다.</p>
<p>비판의 포인트는 크게 3가지이다.</p>
<ol type="1">
<li>"bias"의 정의에 대한 논의 부재</li>
<li>"bias"로 인해 발생하는 문제에 대한 고민 부족 (movitations are often vague, inconsistent, and lacking in normative reasoning)</li>
<li>기존 학계에서 논의되고 있는 "bias"와의 약한 연결성</li>
</ol>
<p>예를 들어, "racial bias"에 대한 다음 기존 연구들을 살펴보자. 다루고 있는 주제는 racial bias 지만 실제로는 보다 협소한 African-American English (AAE) 에 대해서 다루고 있다. (그래놓고 제목에 racial bias를 적어둔 것은 뭘까? Asian 차별에 대해서는?) 그리고 같은 AAE에 대해 다음과 같이 다양한 방식으로 bias 가 존재한다고 주장하고 있다.</p>
<ul>
<li>African American과 연관된 이름은 pleasant words보다 unpleasant words에 더 가까움</li>
<li>POS tagger, Language Identification, dependency parser 에서 AAE에 연관된 term이 포함되는 경우 덜 정확함</li>
<li>toxicity detection system 이 AAE 와 연관된 feature 가 있는 트윗을 더 offensive 하다고 판단내리는 경향이 있음</li>
</ul>
<p>기존 연구들 중 어떤 것도 AAE 혹은 racial hierarchies in the US에서의 racial hierarchies, raciolinguistic 분석을 언급하지 않았다. 또, AAE를 누가 이야기하는가에 따라서도 bias 여부를 다르게 판단할 수 있으나 이에 대한 고려는 없이 오직 text 만 놓고 판단하였다. 어떤 맥락에서 AAE 가 문제가 될 수 있고, bias 되었다고 판단할 수 있는지에 대한 고려는 없었다.</p>
<p>개인적으로도 단순 데이터/모델 결과 분석의 방법론이 애매하다는 생각이 든다. bias가 있는 문장/단어에 대해 다른 문장/단어와 다른 결과를 도출한다고 이야기하고 있지만, 임의의 특성들에 대해서도 심층적으로 분석해보면 똑같은 결과가 나올 것 같다.</p>
<p>그리고 Crowdsourcing 으로 만들어진 dataset이 bias 가 없음을 보장하는 내용도 부족했다. US 에 살고 있는 사람들이 annotator 로 참여했지만 보수적인 주의 사람들이 더 많았다거나, bias에 대한 지식이 부족한 사람들이 더 많았다면 문제가 될 여지가 있다.</p>
<h2 id="so">So?</h2>
<p>올바른 방식으로 bias in NLP 주제를 tackle 하기 위해서는 언제 Biased 모델이 문제를 일으키는지를 우선 고민해봐야할 것 같다.</p>
<p>Biased model은 언제 문제가 될까? (Open Question) Bias 의 범위가 넓으므로 gender bias 에 국한해서 생각해보자. 만약 gender bias detection model 을 간단하게 KcBERT를 korean-hatespeech-dataset (gender bias) task에 finetuning<sup id="fnref:10"><a href="#fn:10" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://github.com/inmoonlight/detox/tree/master
">[10]</span></a></sup> 한 것으로 사용한다고 했을 때, 모델이 틀리는 gender-biased 예문이 o.o.d test set 에서 많이 등장한다면 문제가 될까? 혹은 정답은 제대로 맞추었더라도 잘못된 단어를 queue로 받아서 맞추는 것이라면 문제이지 않을까?</p>
<p>문제가 된다면, 이 문제는 무엇으로부터 기인할까?</p>
<ul>
<li>KcBERT 가 학습한 데이터로부터 오는 문제</li>
<li>KcBERT를 finetuning 하는 방법으로부터 오는 문제</li>
<li>finetuning dataset 의 문제
<ul>
<li>제작 시 "gender bias"를 annotator 의 직관에 맡기기보다는 guideline을 바탕으로 tagging 되었다고 볼 수 있다. 따라서 annotator의 bias를 최소화했다고 보여진다.</li>
</ul></li>
<li>dataset 이 작기 때문에 real world 를 충분히 반영하지 못해서 나타나는 문제
<ul>
<li>Human-in-the-loop 으로 풀어볼 수 있지 않을까?</li>
<li>static benchmark 가 쉽게 stale 해지는 것을 막기 위해 제안된 DynaBench<sup id="fnref:11"><a href="#fn:11" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="https://dynabench.org/
">[11]</span></a></sup>라는 dynamic benchmark framework을 참고하면 어떨까? DynaBench는 user들이 특정 task를 푸는 목적으로 학습된 모델이 틀리는 예문을 생성하고, 이를 바탕으로 다시 모델이 학습해서 지속적으로 발전할 수 있도록 만들어졌다.</li>
</ul></li>
</ul>
<p>간단하게 학습시킨 KcBERT finetuning model 을 통해 예측한 결과를 보았을 때 주어진 testset 과 생각해볼 수 있는 간단한 예문에 대해서는 나쁘지 않은 결과를 보임을 확인하였다. DynaBench를 benchmarking 한 웹사이트를 만들어보면 재밌는 결과를 수집할 수 있지 않을까?</p>
<h2 id="references">References</h2>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://proceedings.neurips.cc/paper/2016/file/a486cd07e4ac3d270571622f4f316ec5-Paper.pdf" rel="external nofollow noopener noreferrer" target="_blank">Man is to computer programmer as woman is to homemaker? debiasing word embeddings</a><a href="#fnref:1" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:2">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://arxiv.org/abs/1608.07187" rel="external nofollow noopener noreferrer" target="_blank">Semantics derived automatically from language corpora contain human-like biases</a><a href="#fnref:2" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:3">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.aclweb.org/anthology/W17-1609/" rel="external nofollow noopener noreferrer" target="_blank">Social Bias in Elicited Natural Language Inferences</a><a href="#fnref:3" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:4">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://www.aclweb.org/anthology/N18-2003/" rel="external nofollow noopener noreferrer" target="_blank">Gender Bias in Coreference Resolution: Evaluation and Debiasing Methods</a><a href="#fnref:4" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:5">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://arxiv.org/abs/2004.09456" rel="external nofollow noopener noreferrer" target="_blank">StereoSet: Measuring stereotypical bias in pretrained language models</a><a href="#fnref:5" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:6">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://arxiv.org/abs/2010.00133" rel="external nofollow noopener noreferrer" target="_blank">CrowS-Pairs: A Challenge Dataset for Measuring Social Biases in Masked Language Models</a><a href="#fnref:6" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:7">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://arxiv.org/abs/2005.14050" rel="external nofollow noopener noreferrer" target="_blank">Language (Technology) is Power: A Critical Survey of “Bias” in NLP</a><a href="#fnref:7" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:8">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">8.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://en.wikipedia.org/wiki/Winograd_Schema_Challenge<a href="#fnref:8" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:9">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">9.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://kyunghyuncho.me/social-impacts-bias-of-ai/<a href="#fnref:9" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:10">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">10.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://github.com/inmoonlight/detox/tree/master<a href="#fnref:10" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:11">
<span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">11.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://dynabench.org/<a href="#fnref:11" rev="footnote"> ↩︎</a></span>
</li>
</ol>
</div>
</div>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/NLP/">NLP</a><a class="link-muted mr-2" rel="tag" href="/tags/social-good/">social good</a><a class="link-muted mr-2" rel="tag" href="/tags/bias/">bias</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/11/30/Don-t-stop-pretraining/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Don&#039;t Stop Pretraining: Adapt Language Models to Domains and Tasks</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/29/Exploring-the-Limits-of-Transfer-Learning-with-a-Unified-Text-to-Text-Transformer/"><span class="level-item">Exploring the Limits of Transfer Learning with a Unified Text-to-Text Transformer (a.k.a. T5)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://inmoonlight.github.io/2020/11/14/Social-bias-in-NLP-models/';
            this.page.identifier = '2020/11/14/Social-bias-in-NLP-models/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'inmoonlight' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex" href="#introduction"><span class="mr-2">1</span><span>Introduction</span></a></li><li><a class="is-flex" href="#undesirable-solution-의-이유는-무엇일까"><span class="mr-2">2</span><span>Undesirable solution 의 이유는 무엇일까?</span></a></li><li><a class="is-flex" href="#모든-bias-가-나쁠까"><span class="mr-2">3</span><span>모든 bias 가 나쁠까?</span></a></li><li><a class="is-flex" href="#nlp에서는"><span class="mr-2">4</span><span>NLP에서는?</span></a><ul class="menu-list"><li><a class="is-flex" href="#모델의-embedding-space-분석"><span class="mr-2">4.1</span><span>모델의 embedding space 분석</span></a></li><li><a class="is-flex" href="#데이터셋-자체에-함유된-bias"><span class="mr-2">4.2</span><span>데이터셋 자체에 함유된 Bias</span></a></li><li><a class="is-flex" href="#bias-evaluation-task"><span class="mr-2">4.3</span><span>Bias evaluation task</span></a></li><li><a class="is-flex" href="#limitations-on-bias-in-nlp-researches"><span class="mr-2">4.4</span><span>Limitations on &quot;Bias in NLP&quot; researches</span></a></li></ul></li><li><a class="is-flex" href="#so"><span class="mr-2">5</span><span>So?</span></a></li><li><a class="is-flex" href="#references"><span class="mr-2">6</span><span>References</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Book/"><span class="level-start"><span class="level-item">Book</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Essay/"><span class="level-start"><span class="level-item">Essay</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/ML/"><span class="level-start"><span class="level-item">ML</span></span><span class="level-end"><span class="level-item tag">12</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/ML/Data-Analysis/"><span class="level-start"><span class="level-item">Data Analysis</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/ML/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/ML/PyTorch/"><span class="level-start"><span class="level-item">PyTorch</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/ML/Quantum-Computing/"><span class="level-start"><span class="level-item">Quantum Computing</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Ops/"><span class="level-start"><span class="level-item">Ops</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Ops/Git/"><span class="level-start"><span class="level-item">Git</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Paper/"><span class="level-start"><span class="level-item">Paper</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">Recent</h3><article class="media"><div class="media-content size-small"><p><time datetime="2021-07-10T16:03:00.000Z">2021-07-11</time></p><p class="title is-6"><a class="link-muted" href="/2021/07/11/Git-merge-strategy/">Git의 다양한 머지 전략 비교 - 우리 팀은 어떤 전략을 도입해야 할까?</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Ops/">Ops</a> / <a class="link-muted" href="/categories/Ops/Git/">Git</a></p></div></article><article class="media"><div class="media-content size-small"><p><time datetime="2021-03-02T19:22:00.000Z">2021-03-03</time></p><p class="title is-6"><a class="link-muted" href="/2021/03/03/PyTorch-view-transpose-reshape/">PyTorch의 view, transpose, reshape 함수의 차이점 이해하기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/ML/">ML</a> / <a class="link-muted" href="/categories/ML/PyTorch/">PyTorch</a></p></div></article><article class="media"><div class="media-content size-small"><p><time datetime="2021-02-21T14:22:00.000Z">2021-02-21</time></p><p class="title is-6"><a class="link-muted" href="/2021/02/21/PyTorch-IterableDataset/">PyTorch의 IterableDataset을 사용해서 데이터 불러오기</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/ML/">ML</a> / <a class="link-muted" href="/categories/ML/PyTorch/">PyTorch</a></p></div></article><article class="media"><div class="media-content size-small"><p><time datetime="2021-02-04T05:22:00.000Z">2021-02-04</time></p><p class="title is-6"><a class="link-muted" href="/2021/02/04/Pandas-Dataframe-iterations/">Pandas Dataframe의 다양한 iteration 방법 비교</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/ML/">ML</a></p></div></article><article class="media"><a class="media-left" href="/2021/01/10/Adieu-2020-and-happy-new-year/"><p class="image is-64x64"><img class="thumbnail" src="/assets/images/2020-2021.jpg" alt="2020년을 정리하고, 2021년을 맞이하는 글"></p></a><div class="media-content size-small"><p><time datetime="2021-01-10T12:13:00.000Z">2021-01-10</time></p><p class="title is-6"><a class="link-muted" href="/2021/01/10/Adieu-2020-and-happy-new-year/">2020년을 정리하고, 2021년을 맞이하는 글</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Essay/">Essay</a></p></div></article></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/space_moon.png" alt="Space Moon" height="28"></a><p class="size-small"><span>&copy; 2024 Jihyung Moon</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://inmoonlight.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to Top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>